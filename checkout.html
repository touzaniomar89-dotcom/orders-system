<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>WDZ | إتمام الطلب</title>

<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&family=Montserrat:wght@400;600;800&display=swap" rel="stylesheet">

<style>
:root{
    --bg:#0A0A0A;
    --card:#121212;
    --neon:#00FF66;
    --text:#ffffff;
    --muted:#8a8a8a;
    --border:#1c1c1c;
}

*{
    box-sizing:border-box;
    margin:0;
    padding:0;
}

body{
    background:var(--bg);
    color:var(--text);
    font-family:'Montserrat',sans-serif;
}

/* HEADER */
.header{
    text-align:center;
    padding:40px 20px 10px;
    font-family:'Orbitron',sans-serif;
    font-size:28px;
    letter-spacing:2px;
    color:var(--neon);
}

.container{
    max-width:1100px;
    margin:auto;
    padding:40px 20px 80px;
}

.grid{
    display:grid;
    grid-template-columns:1fr 1fr;
    gap:50px;
}

.card{
    background:var(--card);
    padding:35px;
    border-radius:20px;
    border:1px solid var(--border);
    transition:.3s;
    box-shadow:0 0 0 transparent;
}

.card:hover{
    box-shadow:0 0 25px rgba(0,255,102,.05);
}

h2{
    font-family:'Orbitron',sans-serif;
    margin-bottom:30px;
    font-size:20px;
    letter-spacing:1px;
}

.summary-item{
    margin-bottom:14px;
    color:var(--muted);
    font-size:15px;
}

.summary-total{
    margin-top:25px;
    font-size:24px;
    font-weight:800;
    color:var(--neon);
    border-top:1px solid var(--border);
    padding-top:20px;
}

/* FORM */
input{
    width:100%;
    padding:16px;
    margin-bottom:20px;
    background:#0f0f0f;
    border:1px solid var(--border);
    color:var(--text);
    border-radius:12px;
    font-size:14px;
    transition:.3s;
}

input:focus{
    outline:none;
    border-color:var(--neon);
    box-shadow:0 0 10px rgba(0,255,102,.15);
}

button{
    width:100%;
    padding:18px;
    background:var(--neon);
    border:none;
    font-weight:800;
    font-size:16px;
    cursor:pointer;
    border-radius:14px;
    transition:.3s;
}

button:hover{
    transform:translateY(-2px);
    box-shadow:0 8px 25px rgba(0,255,102,.25);
}

button:active{
    transform:scale(.98);
}

button.loading{
    opacity:.7;
    pointer-events:none;
}

.trust{
    margin-top:25px;
    font-size:13px;
    color:var(--muted);
    line-height:1.8;
    border-top:1px solid var(--border);
    padding-top:20px;
}

@media(max-width:900px){
    .grid{grid-template-columns:1fr}
}
</style>
</head>
<body>

<div class="header">WDZ STORE</div>

<div class="container">
<div class="grid">

<!-- ORDER SUMMARY -->
<div class="card">
    <h2>ملخص الطلب</h2>
    <div id="productName" class="summary-item"></div>
    <div id="productSize" class="summary-item"></div>
    <div id="productColor" class="summary-item"></div>
    <div id="productQty" class="summary-item"></div>
    <div id="productTotal" class="summary-total"></div>
</div>

<!-- CUSTOMER FORM -->
<div class="card">
    <h2>معلومات العميل</h2>

    <form id="orderForm">
        <input type="text" name="name" placeholder="الاسم الكامل" required>
        <input type="text" name="phone" placeholder="رقم الهاتف" required>
        <input type="text" name="city" placeholder="المدينة" required>
        <input type="text" name="address" placeholder="العنوان الكامل" required>
        <button type="submit" id="submitBtn">تأكيد الطلب</button>
    </form>

    <div class="trust">
        ✔ الدفع عند الاستلام<br>
        ✔ توصيل سريع لجميع مدن المغرب<br>
        ✔ سيتم التواصل خلال 24 ساعة
    </div>
</div>

</div>
</div>

<script>
const API_URL = "https://script.google.com/macros/s/AKfycbynLcGw4Otvlxt85Q-Qqc1XKkQzmW1DKdUzR_cwbvEUFkp9Dd04MkATMfTqyVLmWs7GSg/exec";

const order = JSON.parse(localStorage.getItem("order"));

if(!order){
    document.body.innerHTML = "<h2 style='text-align:center;margin-top:100px;'>لا يوجد طلب.</h2>";
}else{
    const total = order.price * order.quantity;

    document.getElementById("productName").innerText = "المنتج: " + order.name;
    document.getElementById("productSize").innerText = "المقاس: " + order.size;
    document.getElementById("productColor").innerText = "اللون: " + order.color;
    document.getElementById("productQty").innerText = "الكمية: " + order.quantity;
    document.getElementById("productTotal").innerText = "المجموع: " + total + " MAD";
}

document.getElementById("orderForm").addEventListener("submit", function(e){
    e.preventDefault();

    const btn = document.getElementById("submitBtn");
    btn.classList.add("loading");
    btn.innerText = "جارٍ الإرسال...";

    const formData = new FormData(this);

    formData.append("product", order.name);
    formData.append("size", order.size);
    formData.append("color", order.color);
    formData.append("quantity", order.quantity);
    formData.append("price", order.price * order.quantity);
    formData.append("status", "قيد المعالجة");
    formData.append("date", new Date().toISOString().split("T")[0]);

    fetch(API_URL,{
        method:"POST",
        body:formData
    })
    .then(res=>res.json())
    .then(data=>{
        localStorage.removeItem("order");
        window.location.href="thankyou.html";
    });
});
</script>

</body>
</html>
